<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DESERT: Embedded Systems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DESERT
   &#160;<span id="projectnumber">3.2.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('OurDevices.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Embedded Systems </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="gumstix"></a>
Gumstix Overo</h1>
<p><b> Gumstix Overo® FireSTORM COM </b><small>[GUM3703f]</small></p>
<p>See also: <a href="https://store.gumstix.com/coms/overo-coms.html">https://store.gumstix.com/coms/overo-coms.html</a></p>
<div class="image">
<img src="http://desert-underwater.dei.unipd.it/wp-content/uploads/2018/03/overo.png" alt="overo.png"/>
</div>
<p>On the Gumstix Overo board, we installed a Yocto Project® image. We chose to use Yocto because it makes possible to create custom Linux distributions for embedded systems, including Gumstix-based systems. It is a collection of git repositories, known as layers, where each layer provides recipes to build software packages, as well as configuration information. For more details on the Yocto Project, we refer the interested user to <a href="https://www.yoctoproject.org/">https://www.yoctoproject.org/</a>.</p>
<p>There exists a Yocto Project repository which is ready for installation on the Gumstix embedded boards at <a href="https://github.com/gumstix/Gumstix-YoctoProject-Repo">GitHub</a>.</p>
<p>We point the user to the following page for an excellent tutorial on how to build a Yocto distribution for the Gumstix Overo:</p>
<p><a href="http://www.hackgnar.com/2015/03/building-yocto-linux-images-for-gumstix.html">http://www.hackgnar.com/2015/03/building-yocto-linux-images-for-gumstix.html</a></p>
<p>and follow the installation steps described therein. After the distro has been built, the next step is to prepare the file system to be copied on board the micro SD card that will be loaded on the Gumstix. The last steps in the previous page will guide the user towards this.</p>
<p>Be aware that there are some changes to be made with respect to the page, namely</p>
<ul>
<li>The file <code>uImage</code> does not exist anymore in the <code>../yocto/build/tmp/deploy/images/overo</code> folder and so, it does not need to be copied.</li>
<li>The filesystem of the Yocto image is not in <code>yocto.tar.bz2</code> as pointed out by the tutorial bu, instead, is found at <code>gumstix-console-image-overo.tar.bz2</code>.</li>
<li>Once the user has identified the micro SD device (i.e. <code>/dev/sdX</code>) the file system is normally mounted (on a Ubuntu machine) at <code>/media/&lt;USERNAME&gt;/&lt;DEVICE_FOLDER&gt;</code>.</li>
</ul>
<p>After all files have been uploaded to the Gumstix's microSD card and your Gumstix system boots, the final step is to set the toolchain. You can do so as follows: <br />
</p><ul>
<li>Generate the Yocto toolchain through: <small> <pre class="fragment">cd ../yocto/
source poky/oe-init-build-env
bitbake meta-ide-support
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>Create an empty directory to hold the toolchain that was generated: <small> <pre class="fragment">sudo mkdir -p /opt/overo-yocto/
cd /opt/overo-yocto/
</pre></small></li>
</ul>
<p><small></small></p><ul>
<li>Now create a symbolic link to the gumstix toolchain in the folder above, and write the environment file: <small> <pre class="fragment">sudo ln -sf .../yocto/build/tmp/sysroots/x86_64-linux /opt/overo-yocto/sysroots-x86_64-linux
sudo touch environment
</pre></small></li>
</ul>
<p><small></small></p><ul>
<li>Open the <code>environment</code> file with a text editor and write the following lines: <small> <pre class="fragment">export PATH=/opt/overo/sysroots/x86_64-linux/usr/bin/arm-poky-linux-gnueabi:$PATH
export SDKTARGETSYSROOT=/opt/overo/sysroots/overo
export CC="arm-poky-linux-gnueabi-gcc  -march=armv7-a -mfloat-abi=hard -mfpu=neon -mtune=cortex-a8 --sysroot=$SDKTARGETSYSROOT"
export CXX="arm-poky-linux-gnueabi-g++  -march=armv7-a -mfloat-abi=hard -mfpu=neon -mtune=cortex-a8 --sysroot=$SDKTARGETSYSROOT"
export STRIP=arm-poky-linux-gnueabi-strip
export AR=arm-poky-linux-gnueabi-ar
</pre></small></li>
</ul>
<p><small></small></p>
<p>At this point it is possible to use the installation script.<br />
 To do so, go inside <code>.../DESERT_Underwater/DESERT_Framework/</code><br />
 and launch <code>./install.sh [OPTIONS]</code> <br />
 See section <a class="el" href="INSTALL1.html#install">Installation procedures</a> for more information about the options.</p>
<p><br />
</p>
<h1><a class="anchor" id="raspberry"></a>
Raspberry Pi</h1>
<p><b> Raspberry Pi® Model B</b></p>
<p>See also: <a href="http://www.raspberrypi.org/">http://www.raspberrypi.org/</a></p>
<div class="image">
<img src="http://desert-underwater.dei.unipd.it/wp-content/uploads/2018/03/rasberry-pi.png" alt="rasberry-pi.png"/>
</div>
<p>The Raspberry Pi is an ultra low cost embedded system that supports GNU/Linux OSes and was conceived with the primary goal of teaching computer programming. Its price tag ($25-$35), and the wide availability of pre-compiled software, makes it a perfect embedded system to start with for getting your hands dirty. Three main versions have been developed up to now: Raspberry Pi 1, 2 and 3.</p>
<p>Also for the Raspberry Pi embedded system we used Yocto to create a Linux-based distro with the required toolchain. The Yocto project has an official Raspberry Pi image (BSP layer) in the main Yocto repository and the versions 1, 2 and 3 are supported. The first step it to point the user to it:</p>
<p><a href="https://git.yoctoproject.org/cgit/cgit.cgi/meta-raspberrypi/">https://git.yoctoproject.org/cgit/cgit.cgi/meta-raspberrypi/</a></p>
<p>The procedure to create an image for the Raspberry Pi is easier than the one for the Gumstix. The steps described builds a Raspberry Pi version 1 image but the procedure can be easily adapted to work with version 2 or 3 of the board.</p>
<ul>
<li>create a folder, named <code>yocto</code>, in your system and cd in it <small> <pre class="fragment">mkdir yocto
cd yocto
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>clone the Yocto repository (the branch <code>krogoth</code>) <small> <pre class="fragment">git clone -b krogoth git://git.yoctoproject.org/poky.git
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>cd in the folder created by the git command <small> <pre class="fragment">cd poky
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>clone the meta layer of the brach <code>krogoth</code> for the Raspberry Pi <small> <pre class="fragment">git clone -b krogoth git://git.yoctoproject.org/meta-raspberrypi
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>set the terminal to use bitbake (you will be in a folder called <code>build</code>) <small> <pre class="fragment">source oe-init-build-env
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>there are few configurations to make: first edit <code>conf/local.conf</code> to add these lines (changing raspberry to raspberrypi2 or raspberrypi3 if you are building for these devices) <small> <pre class="fragment">MACHINE = "raspberrypi"
GPU_MEM = "16"

...

EXTRA_IMAGE_FEATURES ?= "debug-tweaks tools-sdk"
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>second edit <code>conf/bblayers.conf</code> to add the <code>meta-raspberrypi</code> bblayer <small> <pre class="fragment">BBLAYERS ?= "
&lt;PATH_TO_YOUR_YOCTO_FOLDER&gt;/yocto/poky/meta \
&lt;PATH_TO_YOUR_YOCTO_FOLDER&gt;/yocto/poky/meta-poky \
&lt;PATH_TO_YOUR_YOCTO_FOLDER&gt;/yocto/poky/meta-yocto-bsp \
&lt;PATH_TO_YOUR_YOCTO_FOLDER&gt;/yocto/poky/meta-raspberrypi \
"
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>start the creation of the image to be copied onto the SD card (this will take some time) <small> <pre class="fragment">bitbake -k rpi-basic-image
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>while on this shell, let's build also the toolchain needed to cross-compile DESERT. To do it, run: <small> <pre class="fragment">bitbake meta-ide-support
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>when the compilation will be over, insert an SD card (at least 4 GB) in your card reader and identify the device name by running <code>dmesg</code> <small> <pre class="fragment">dmesg
...
[102430.343577]  sdX
...
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>in order to copy the image on the SD card, run (specifying the device <code>sdX</code>) <small> <pre class="fragment">cd tmp/deploy/images/raspberrypi
sudo dd if=rpi-basic-image-raspberrypi.rpi-sdimg of=/dev/sdX bs=1M
</pre></small></li>
</ul>
<p><small></small></p>
<p>After <code>dd</code> finished with the copy, you have to expand the root partition on your SD to fit the entire sd card. You can do it by using <code>gparted</code> which is both powerful and easy to use. A good tutorial can be found here: <a href="https://www.ibm.com/developerworks/library/l-resizing-partitions-1/">https://www.ibm.com/developerworks/library/l-resizing-partitions-1/</a>.</p>
<p>After all the files have been copied to the Raspberry Pi's SD card and your system boots up, the final step is to set the toolchain system variables, needed for the cross-compilation of DESERT. You can do so as follows:</p>
<ul>
<li>Create an empty directory to hold the environment file for the toolchain: <small> <pre class="fragment">sudo mkdir -p /opt/raspberry/
cd /opt/raspberry/
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>Now create a symbolic link to the raspberry-pi toolchain, and write the environment file: <small> <pre class="fragment">sudo ln -sf &lt;PATH_TO_YOUR_YOCTO_FOLDER&gt;/yocto/poky/build/tmp/sysroots  /opt/raspberry/sysroots
sudo touch environment
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>Open the <code>environment</code> file with a text editor and write the following lines: <small> <pre class="fragment">export PATH=/opt/raspberry/sysroots/x86_64-linux/usr/bin/arm-poky-linux-gnueabi:$PATH
export SDKTARGETSYSROOT=/opt/raspberry/sysroots/raspberrypi
export CC="arm-poky-linux-gnueabi-gcc  -march=armv6 -mfpu=vfp  -mfloat-abi=hard -mtune=arm1176jzf-s -mfpu=vfp --sysroot=$SDKTARGETSYSROOT"
export CXX="arm-poky-linux-gnueabi-g++  -march=armv6 -mfpu=vfp  -mfloat-abi=hard -mtune=arm1176jzf-s -mfpu=vfp --sysroot=$SDKTARGETSYSROOT"
export STRIP=arm-poky-linux-gnueabi-strip
export AR=arm-poky-linux-gnueabi-ar
</pre></small></li>
</ul>
<p><small></small></p>
<p>At this point it is possible to use the installation script. To do so, go inside <code>.../DESERT_Underwater/DESERT_Framework/</code> and launch <code>./install.sh [OPTIONS]</code>. See section <a class="el" href="INSTALL1.html#install">Installation procedures</a> for more information about the options.</p>
<p>Please note that the first time that you run the command bitbake, the system will require several hours to fetch all the recipes, paths, configures and compile them. Fortunately the next time the procedure will be much faster.</p>
<p>Yocto is a very good starting point to enter the world of embedded system, but if you do not want or you do not have time to learn Yocto there are other alternatives. There exists linux distributions online ready to be copied directly on the SD card. The most common are:</p>
<ul>
<li>Raspbian (based on Debian): <a href="http://www.raspbian.org/">http://www.raspbian.org/</a></li>
<li>Fedora ARM: <a href="https://fedoraproject.org/wiki/Raspberry_Pi">https://fedoraproject.org/wiki/Raspberry_Pi</a></li>
</ul>
<p>But a more comprehensive list is available at the Raspberry Pi official website:</p>
<p><a href="https://www.raspberrypi.org/downloads">https://www.raspberrypi.org/downloads</a></p>
<p>In order to cross-compile DESERT you need a toolchain: you can download one from the network (<a href="https://github.com/raspberrypi/tools">https://github.com/raspberrypi/tools</a>) or you can compile one by using crosstool-ng (<a href="http://crosstool-ng.org/">http://crosstool-ng.org/</a>): an alternative is to use the precompiled toolchain that could be already available in your OS repositories.</p>
<p>A good and complete tutorial on how to use the crosstool-ng for the Raspberry Pi can be found here: <a href="http://elinux.org/RPi_Linaro_GCC_Compilation">http://elinux.org/RPi_Linaro_GCC_Compilation</a>.</p>
<p><br />
</p>
<h1><a class="anchor" id="udoo"></a>
Udoo</h1>
<p><b> Udoo Quad</b></p>
<p>See also: <a href="http://www.udoo.org/">http://www.udoo.org/</a></p>
<div class="image">
<img src="http://desert-underwater.dei.unipd.it/wp-content/uploads/2018/03/udoo-quad.png" alt="udoo-quad.png"/>
</div>
<p>UDOO is a mini PC that can be used both with Android and Linux OS, with an embedded Arduino-compatible board. It is a powerful prototyping board for software development and design; it is easy to use and enables project development with minimum hardware knowledge. UDOO merges different computing worlds together: each one has its proper strengths and weak points, but all of them are useful for educational purposes as well as Do-It-Yourself (DIY) and quick prototyping. UDOO is an open hardware, low-cost platform equipped with an ARM i.MX6 Freescale processor, and an Arduino Due compatible section based on ATMEL SAM3X8E ARM processor, all this available on the same board.</p>
<p>On the UDOO website, at the <a href="http://download.udoo.org/files/UDOO_Unico/UDOO_QDL_img/UDOObuntu_img/udoobuntu-udoo-qdl-desktop_2.1.2.zip">download</a> page, you can find images for several operative systems like: Ubuntu, Android and Debian. For our purposes, we tested DESERT with an UDOO quad, where we intalled the UDOObuntu 2.1.2 (Ubuntu 14.04 LTS).</p>
<ul>
<li>The procedure to follow to download and copy the image on the sd card is the following: <small> <pre class="fragment"> wget http://download.udoo.org/files/UDOO_Unico/UDOO_QDL_img/UDOObuntu_img/udoobuntu-udoo-qdl-desktop_2.1.2.zip
 unzip udoo_quad_ubuntu1204_v2.1.zip
 sudo dd if=udoo_quad_ubuntu1204_v2.1.img of=/dev/sdX bs=1M
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>After you have to download the toolchain and add it to your system: <small> <pre class="fragment">cd $HOME
wget https://releases.linaro.org/15.05/components/toolchain/binaries/arm-linux-gnueabihf/gcc-linaro-4.9-2015.05-x86_64_arm-linux-gnueabihf.tar.xz
gcc-linaro-4.9-2015.05-x86_64_arm-linux-gnueabihf.tar.xz
sudo mkdir /opt/udoo
sudo ln -s $HOME/gcc-linaro-4.9-2015.05-x86_64_arm-linux-gnueabihf/  /opt/udoo/arm-linux-gnueabihf-linaro
</pre></small></li>
</ul>
<p><small></small></p>
<ul>
<li>Open the environment file with a text editor and write the following lines (remember to edit it as sudo): <small> <pre class="fragment">export PATH=/opt/udoo/arm-linux-gnueabihf-linaro/bin:$PATH
export CC=arm-linux-gnueabihf-gcc
export CXX=arm-linux-gnueabihf-g++
export GDB=arm-linux-gnueabihf-gdb
export STRIP=arm-linux-gnueabihf-strip
export AR=arm-linux-gnueabihf-a
</pre></small></li>
</ul>
<p><small></small></p>
<p>At this point it is possible to use the installation script. To do so, go inside <code>.../DESERT_Underwater/DESERT_Framework/</code> and launch <code>./install.sh [OPTION]</code>. See section <a class="el" href="INSTALL1.html#install">Installation procedures</a> for more information about the options. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
