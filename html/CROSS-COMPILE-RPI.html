<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DESERT: How to cross-compile DESERT for Raspberry Pi Zero</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DESERT
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('CROSS-COMPILE-RPI.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">How to cross-compile DESERT for Raspberry Pi Zero </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="CROSS-COMPILE-RPI-bare"></a>
Cross-compilation on Debian/Ubuntu workstation</h1>
<p>To download the appropriate toolchain, you can use the script provided inside</p>
<p><small> </p><pre class="fragment">.../DESERT_Framework/Installer/make-rpi-toolchain.sh
</pre><p> </small></p>
<blockquote class="doxtable">
<p>NOTE: this script requires sudo capabilities and workstation should be connected to the internet. </p>
</blockquote>
<p>After script correctly finished, you can compile DESERT for Raspberry Pi Zero selecting the appropriate arch and selecting *"release"* modality when asked during wizard procedure in order not to copy unnecessary files.</p>
<p><small> </p><pre class="fragment">./install.sh --target Raspberry-Pi-zero-Raspbian --inst_mode release --dest_folder /home/yourhome/DESERT_Underwater/DESERT_buildCopy_Raspberry-Pi-zero-Raspbian
</pre><p> </small></p>
<p>After installation has been correctly completed, you can copy *_buildCopy* folder inside your Raspberry, source the environment files and run you tcl files inside the Raspberry.</p>
<p><small> </p><pre class="fragment">scp -r /home/yourhome/DESERT_Underwater/DESERT_buildCopy_Raspberry-Pi-zero-Raspbian pi@&lt;your-raspi-ip-address&gt;:~
</pre><p> </small></p>
<p>you can now get access via ssh to your Raspberry and source the DESERT env file in order to setup PATH and LD_LIBRARY_PATH variables</p>
<p><small> </p><pre class="fragment">ssh root@&lt;your-modem-ip-address&gt;
source .../DESERT_buildCopy_Raspberry-Pi-zero-Raspbian/environment
</pre><p> </small></p>
<h1><a class="anchor" id="CROSS-COMPILE-RPI-docker"></a>
Use docker</h1>
<p>In order to simplify the cross-compilation process, a Dockerfile is present in .../DESERT_Framework/Docker/xcompile folder, which prepares for you the right environment to cross-compile DESERT on Raspberry</p>
<blockquote class="doxtable">
<p>NOTE: The following section requires Docker to be installed and working on workstation </p>
</blockquote>
<p>You have to first build your docker image</p>
<p><small> </p><pre class="fragment">docker build --network=host -t desert/raspi-zero-cross:latest -f Dockerfile-Raspberry-Pi-Zero .
</pre><p> </small></p>
<p>You can now use the just built docker image to run a container and build DESERT inside it. To run that container you can use the provided script inside .../DESERT_Framework/Docker/xcompile</p>
<p><small> </p><pre class="fragment">./docker-init.sh desert/raspi-zero-cross:latest
</pre><p> </small></p>
<p>You will have a shell inside the running container with DESERT framework mounted on its filesystem, and you can now proceed to compile DESERT as in the previous section. At the end of the installation, you can exit the docker container shell (container will now die) and copy the *_buildCopy* folder inside your Raspberry, as explained in the previous section </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
